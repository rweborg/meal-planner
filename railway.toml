# Railway deployment config (https://docs.railway.app/reference/config-as-code)
# Build: copy Postgres schema, generate client, then next build (no dependency on package.json).

[build]
buildCommand = "node scripts/copy-postgres-schema.js && npx prisma generate && npx next build"

[deploy]
# Override default: do nothing so Railway doesn't run prisma migrate (which was failing with P3019).
# Run migrations manually once after first deploy (see docs/RAILWAY-STEP-BY-STEP.md).
preDeployCommand = "true"
