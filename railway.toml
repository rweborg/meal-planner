# Railway deployment config (https://docs.railway.app/reference/config-as-code)
# Build: ensure schema uses postgres (when on Railway), then prisma generate, then next build.
# railway.toml runs this so the fix applies even if package.json build script is cached.

[build]
buildCommand = "node scripts/ensure-postgres-schema.js && npm run build"

[deploy]
preDeployCommand = "npx prisma migrate deploy"
