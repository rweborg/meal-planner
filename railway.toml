# Railway deployment config (https://docs.railway.app/reference/config-as-code)
# Build: copy Postgres schema, generate client, then next build (no dependency on package.json).

[build]
buildCommand = "node scripts/copy-postgres-schema.js && npx prisma generate && npx next build"

[deploy]
# Run copy script first so deploy env has correct migration_lock.toml and only Postgres migration
preDeployCommand = "node scripts/copy-postgres-schema.js && npx prisma migrate deploy"
